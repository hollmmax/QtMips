#
# spec file for package @MAIN_PROJECT_NAME_LOWER@
#
# @COPYRIGHT@
#
# This program is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by the Free
# Software Foundation, either version 3 of the License, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
# more details.

# You should have received a copy of the GNU General Public License along with
# this program. If not, see <https://www.gnu.org/licenses/>
#
# Please submit bugfixes or comments via
#   @PROJECT_HOME_PAGE@
# issues tracker.
#


Name:           @MAIN_PROJECT_NAME_LOWER@
Version:        @PROJECT_VERSION@
Release:        0
Summary:        @PROJECT_DESCRIPTION@
License:        @LICENCE@
Group:          System/Emulators/Other
URL:            @PROJECT_HOMEPAGE_URL@
Source:         @MAIN_PROJECT_NAME_LOWER@_%{version}.tar.xz
BuildRequires:  cmake
BuildRequires:  gcc-c++
BuildRequires:  pkgconfig
BuildRequires:  pkgconfig(Qt5Core)
BuildRequires:  pkgconfig(Qt5Widgets)
BuildRequires:  pkgconfig(Qt5Test)
BuildRequires:  pkgconfig(Qt5PrintSupport)
BuildRequires:  hicolor-icon-theme

%if ! 0%{?suse_version}
BuildRequires:  pkgconfig(libelf)
BuildRequires:  desktop-file-utils
%endif

%if 0%{?suse_version}
BuildRequires:  libelf-devel
BuildRequires:  update-desktop-files
%endif

%description
@LONG_DESCPPRIPTION@

%prep
%setup -q

%build
%cmake -DCMAKE_CXX_FLAGS="-Wno-error" -DCMAKE_C_FLAGS="-Wno-error"
%cmake_build

%install
%cmake_install

#desktop icon
%if 0%{?suse_version}
%suse_update_desktop_file -r -i @MAIN_PROJECT_NAME_LOWER@ 'System Emulator'
%endif

%if 0%{?fedora} || 0%{?rhel} || 0%{?centos}
desktop-file-validate %{buildroot}share/applications/@MAIN_PROJECT_NAME_LOWER@.desktop
%endif

%files
/usr/bin/qtrvsim_gui
/usr/bin/qtrvsim_cli
/usr/share/icons/hicolor/scalable/apps/qtrvsim_gui.svg
/usr/share/icons/hicolor/48x48/apps/qtrvsim_gui.png
/usr/share/applications/qtrvsim.desktop

%license LICENSE
%doc README.md

%changelog
